/* =========================================================
 * bootstrap-datepicker.js
 * http://www.eyecon.ro/bootstrap-datepicker
 * =========================================================
 * Copyright 2012 Stefan Petre
 * Improvements by Andrew Rowls
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================= */
!function(d){function q(){return new Date(Date.UTC.apply(Date,arguments))}var p=function(a,b){var c=this;this.element=d(a);this.language=b.language||this.element.data("date-language")||"en";this.language=this.language in n?this.language:this.language.split("-")[0];this.language=this.language in n?this.language:"en";this.isRTL=n[this.language].rtl||!1;this.format=f.parseFormat(b.format||this.element.data("date-format")||n[this.language].format||"mm/dd/yyyy");this.isInline=!1;this.isInput=this.element.is("input");
this.hasInput=(this.component=this.element.is(".date")?this.element.find(".add-on, .btn"):!1)&&this.element.find("input").length;this.component&&0===this.component.length&&(this.component=!1);this._attachEvents();this.forceParse=!0;"forceParse"in b?this.forceParse=b.forceParse:"dateForceParse"in this.element.data()&&(this.forceParse=this.element.data("date-force-parse"));this.picker=d(f.template).appendTo(this.isInline?this.element:"body").on({click:d.proxy(this.click,this),mousedown:d.proxy(this.mousedown,
this)});this.isInline?this.picker.addClass("datepicker-inline"):this.picker.addClass("datepicker-dropdown dropdown-menu");this.isRTL&&(this.picker.addClass("datepicker-rtl"),this.picker.find(".prev i, .next i").toggleClass("icon-arrow-left icon-arrow-right"));d(document).on("mousedown",function(a){0===d(a.target).closest(".datepicker.datepicker-inline, .datepicker.datepicker-dropdown").length&&c.hide()});this.autoclose=!1;"autoclose"in b?this.autoclose=b.autoclose:"dateAutoclose"in this.element.data()&&
(this.autoclose=this.element.data("date-autoclose"));this.keyboardNavigation=!0;"keyboardNavigation"in b?this.keyboardNavigation=b.keyboardNavigation:"dateKeyboardNavigation"in this.element.data()&&(this.keyboardNavigation=this.element.data("date-keyboard-navigation"));this.viewMode=this.startViewMode=0;switch(b.startView||this.element.data("date-start-view")){case 2:case "decade":this.viewMode=this.startViewMode=2;break;case 1:case "year":this.viewMode=this.startViewMode=1}this.minViewMode=b.minViewMode||
this.element.data("date-min-view-mode")||0;if("string"===typeof this.minViewMode)switch(this.minViewMode){case "months":this.minViewMode=1;break;case "years":this.minViewMode=2;break;default:this.minViewMode=0}this.viewMode=this.startViewMode=Math.max(this.startViewMode,this.minViewMode);this.todayBtn=b.todayBtn||this.element.data("date-today-btn")||!1;this.todayHighlight=b.todayHighlight||this.element.data("date-today-highlight")||!1;this.calendarWeeks=!1;"calendarWeeks"in b?this.calendarWeeks=b.calendarWeeks:
"dateCalendarWeeks"in this.element.data()&&(this.calendarWeeks=this.element.data("date-calendar-weeks"));this.calendarWeeks&&this.picker.find("tfoot th.today").attr("colspan",function(a,b){return parseInt(b)+1});this.weekStart=(b.weekStart||this.element.data("date-weekstart")||n[this.language].weekStart||0)%7;this.weekEnd=(this.weekStart+6)%7;this.startDate=-Infinity;this.endDate=Infinity;this.daysOfWeekDisabled=[];this.setStartDate(b.startDate||this.element.data("date-startdate"));this.setEndDate(b.endDate||
this.element.data("date-enddate"));this.setDaysOfWeekDisabled(b.daysOfWeekDisabled||this.element.data("date-days-of-week-disabled"));this.fillDow();this.fillMonths();this.update();this.showMode();this.isInline&&this.show()};p.prototype={constructor:p,_events:[],_attachEvents:function(){this._detachEvents();this.isInput?this._events=[[this.element,{focus:d.proxy(this.show,this),keyup:d.proxy(this.update,this),keydown:d.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),
{focus:d.proxy(this.show,this),keyup:d.proxy(this.update,this),keydown:d.proxy(this.keydown,this)}],[this.component,{click:d.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:d.proxy(this.show,this)}]];for(var a=0,b,c;a<this._events.length;a++)b=this._events[a][0],c=this._events[a][1],b.on(c)},_detachEvents:function(){for(var a=0,b,c;a<this._events.length;a++)b=this._events[a][0],c=this._events[a][1],b.off(c);this._events=[]},show:function(a){this.picker.show();
this.height=this.component?this.component.outerHeight():this.element.outerHeight();this.update();this.place();d(window).on("resize",d.proxy(this.place,this));a&&a.preventDefault();this.element.trigger({type:"show",date:this.date})},hide:function(a){!this.isInline&&this.picker.is(":visible")&&(this.picker.hide(),d(window).off("resize",this.place),this.viewMode=this.startViewMode,this.showMode(),this.isInput||d(document).off("mousedown",this.hide),this.forceParse&&(this.isInput&&this.element.val()||
this.hasInput&&this.element.find("input").val())&&this.setValue(),this.element.trigger({type:"hide",date:this.date}))},remove:function(){this._detachEvents();this.picker.remove();delete this.element.data().datepicker;this.isInput||delete this.element.data().date},getDate:function(){var a=this.getUTCDate();return new Date(a.getTime()+6E4*a.getTimezoneOffset())},getUTCDate:function(){return this.date},setDate:function(a){this.setUTCDate(new Date(a.getTime()-6E4*a.getTimezoneOffset()))},setUTCDate:function(a){this.date=
a;this.setValue()},setValue:function(){var a=this.getFormattedDate();this.isInput?this.element.val(a):(this.component&&this.element.find("input").val(a),this.element.data("date",a))},getFormattedDate:function(a){void 0===a&&(a=this.format);return f.formatDate(this.date,a,this.language)},setStartDate:function(a){this.startDate=a||-Infinity;-Infinity!==this.startDate&&(this.startDate=f.parseDate(this.startDate,this.format,this.language));this.update();this.updateNavArrows()},setEndDate:function(a){this.endDate=
a||Infinity;Infinity!==this.endDate&&(this.endDate=f.parseDate(this.endDate,this.format,this.language));this.update();this.updateNavArrows()},setDaysOfWeekDisabled:function(a){this.daysOfWeekDisabled=a||[];d.isArray(this.daysOfWeekDisabled)||(this.daysOfWeekDisabled=this.daysOfWeekDisabled.split(/,\s*/));this.daysOfWeekDisabled=d.map(this.daysOfWeekDisabled,function(a){return parseInt(a,10)});this.update();this.updateNavArrows()},place:function(){if(!this.isInline){var a=parseInt(this.element.parents().filter(function(){return"auto"!=
d(this).css("z-index")}).first().css("z-index"))+10,b=this.component?this.component.parent().offset():this.element.offset(),c=this.component?this.component.outerHeight(!0):this.element.outerHeight(!0);this.picker.css({top:b.top+c,left:b.left,zIndex:a})}},update:function(){var a,b=!1;arguments&&arguments.length&&("string"===typeof arguments[0]||arguments[0]instanceof Date)?(a=arguments[0],b=!0):a=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val();this.date=
f.parseDate(a,this.format,this.language);b&&this.setValue();this.viewDate=this.date<this.startDate?new Date(this.startDate):this.date>this.endDate?new Date(this.endDate):new Date(this.date);this.fill()},fillDow:function(){var a=this.weekStart,b="<tr>";this.calendarWeeks&&(b+='<th class="cw">&nbsp;</th>',this.picker.find(".datepicker-days thead tr:first-child").prepend('<th class="cw">&nbsp;</th>'));for(;a<this.weekStart+7;)b+='<th class="dow">'+n[this.language].daysMin[a++%7]+"</th>";b+="</tr>";this.picker.find(".datepicker-days thead").append(b)},
fillMonths:function(){for(var a="",b=0;12>b;)a+='<span class="month">'+n[this.language].monthsShort[b++]+"</span>";this.picker.find(".datepicker-months td").html(a)},fill:function(){var a=new Date(this.viewDate),b=a.getUTCFullYear(),c=a.getUTCMonth(),a=-Infinity!==this.startDate?this.startDate.getUTCFullYear():-Infinity,e=-Infinity!==this.startDate?this.startDate.getUTCMonth():-Infinity,t=Infinity!==this.endDate?this.endDate.getUTCFullYear():Infinity,h=Infinity!==this.endDate?this.endDate.getUTCMonth():
Infinity,k=this.date&&this.date.valueOf(),r=new Date;this.picker.find(".datepicker-days thead th.switch").text(n[this.language].months[c]+" "+b);this.picker.find("tfoot th.today").text(n[this.language].today).toggle(!1!==this.todayBtn);this.updateNavArrows();this.fillMonths();var g=q(b,c-1,28,0,0,0,0),l=f.getDaysInMonth(g.getUTCFullYear(),g.getUTCMonth());g.setUTCDate(l);g.setUTCDate(l-(g.getUTCDay()-this.weekStart+7)%7);var p=new Date(g);p.setUTCDate(p.getUTCDate()+42);for(var p=p.valueOf(),l=[],
m;g.valueOf()<p;){if(g.getUTCDay()==this.weekStart&&(l.push("<tr>"),this.calendarWeeks)){m=new Date(+g+864E5*((this.weekStart-g.getUTCDay()-7)%7));m=new Date(+m+864E5*((11-m.getUTCDay())%7));var s=new Date(+(s=q(m.getUTCFullYear(),0,1))+864E5*((11-s.getUTCDay())%7));l.push('<td class="cw">'+((m-s)/864E5/7+1)+"</td>")}m="";if(g.getUTCFullYear()<b||g.getUTCFullYear()==b&&g.getUTCMonth()<c)m+=" old";else if(g.getUTCFullYear()>b||g.getUTCFullYear()==b&&g.getUTCMonth()>c)m+=" new";this.todayHighlight&&
(g.getUTCFullYear()==r.getFullYear()&&g.getUTCMonth()==r.getMonth()&&g.getUTCDate()==r.getDate())&&(m+=" today");k&&g.valueOf()==k&&(m+=" active");if(g.valueOf()<this.startDate||g.valueOf()>this.endDate||-1!==d.inArray(g.getUTCDay(),this.daysOfWeekDisabled))m+=" disabled";l.push('<td class="day'+m+'">'+g.getUTCDate()+"</td>");g.getUTCDay()==this.weekEnd&&l.push("</tr>");g.setUTCDate(g.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(l.join(""));s=this.date&&this.date.getUTCFullYear();
l=this.picker.find(".datepicker-months").find("th:eq(1)").text(b).end().find("span").removeClass("active");s&&s==b&&l.eq(this.date.getUTCMonth()).addClass("active");(b<a||b>t)&&l.addClass("disabled");b==a&&l.slice(0,e).addClass("disabled");b==t&&l.slice(h+1).addClass("disabled");l="";b=10*parseInt(b/10,10);e=this.picker.find(".datepicker-years").find("th:eq(1)").text(b+"-"+(b+9)).end().find("td");b-=1;for(h=-1;11>h;h++)l+='<span class="year'+(-1==h||10==h?" old":"")+(s==b?" active":"")+(b<a||b>t?
" disabled":"")+'">'+b+"</span>",b+=1;e.html(l)},updateNavArrows:function(){var a=new Date(this.viewDate),b=a.getUTCFullYear(),a=a.getUTCMonth();switch(this.viewMode){case 0:-Infinity!==this.startDate&&b<=this.startDate.getUTCFullYear()&&a<=this.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"});Infinity!==this.endDate&&b>=this.endDate.getUTCFullYear()&&a>=this.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):
this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:-Infinity!==this.startDate&&b<=this.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),Infinity!==this.endDate&&b>=this.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}},click:function(a){a.preventDefault();a=d(a.target).closest("span, td, th");if(1==a.length)switch(a[0].nodeName.toLowerCase()){case "th":switch(a[0].className){case "switch":this.showMode(1);
break;case "prev":case "next":a=f.modes[this.viewMode].navStep*("prev"==a[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,a);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,a)}this.fill();break;case "today":a=new Date,a=q(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0),this.showMode(-2),this._setDate(a,"linked"==this.todayBtn?null:"view")}break;case "span":if(!a.is(".disabled")){this.viewDate.setUTCDate(1);if(a.is(".month")){var b=1,c=a.parent().find("span").index(a),
e=this.viewDate.getUTCFullYear();this.viewDate.setUTCMonth(c);this.element.trigger({type:"changeMonth",date:this.viewDate});1==this.minViewMode&&this._setDate(q(e,c,b,0,0,0,0))}else e=parseInt(a.text(),10)||0,b=1,c=0,this.viewDate.setUTCFullYear(e),this.element.trigger({type:"changeYear",date:this.viewDate}),2==this.minViewMode&&this._setDate(q(e,c,b,0,0,0,0));this.showMode(-1);this.fill()}break;case "td":a.is(".day")&&!a.is(".disabled")&&(b=parseInt(a.text(),10)||1,e=this.viewDate.getUTCFullYear(),
c=this.viewDate.getUTCMonth(),a.is(".old")?0===c?(c=11,e-=1):c-=1:a.is(".new")&&(11==c?(c=0,e+=1):c+=1),this._setDate(q(e,c,b,0,0,0,0)))}},_setDate:function(a,b){b&&"date"!=b||(this.date=a);b&&"view"!=b||(this.viewDate=a);this.fill();this.setValue();this.element.trigger({type:"changeDate",date:this.date});var c;this.isInput?c=this.element:this.component&&(c=this.element.find("input"));c&&(c.change(),!this.autoclose||b&&"date"!=b||this.hide())},moveMonth:function(a,b){if(!b)return a;var c=new Date(a.valueOf()),
e=c.getUTCDate(),d=c.getUTCMonth(),h=Math.abs(b),k;b=0<b?1:-1;if(1==h){if(h=-1==b?function(){return c.getUTCMonth()==d}:function(){return c.getUTCMonth()!=k},k=d+b,c.setUTCMonth(k),0>k||11<k)k=(k+12)%12}else{for(var f=0;f<h;f++)c=this.moveMonth(c,b);k=c.getUTCMonth();c.setUTCDate(e);h=function(){return k!=c.getUTCMonth()}}for(;h();)c.setUTCDate(--e),c.setUTCMonth(k);return c},moveYear:function(a,b){return this.moveMonth(a,12*b)},dateWithinRange:function(a){return a>=this.startDate&&a<=this.endDate},
keydown:function(a){if(this.picker.is(":not(:visible)"))27==a.keyCode&&this.show();else{var b=!1,c,e,d;switch(a.keyCode){case 27:this.hide();a.preventDefault();break;case 37:case 39:if(!this.keyboardNavigation)break;c=37==a.keyCode?-1:1;a.ctrlKey?(e=this.moveYear(this.date,c),d=this.moveYear(this.viewDate,c)):a.shiftKey?(e=this.moveMonth(this.date,c),d=this.moveMonth(this.viewDate,c)):(e=new Date(this.date),e.setUTCDate(this.date.getUTCDate()+c),d=new Date(this.viewDate),d.setUTCDate(this.viewDate.getUTCDate()+
c));this.dateWithinRange(e)&&(this.date=e,this.viewDate=d,this.setValue(),this.update(),a.preventDefault(),b=!0);break;case 38:case 40:if(!this.keyboardNavigation)break;c=38==a.keyCode?-1:1;a.ctrlKey?(e=this.moveYear(this.date,c),d=this.moveYear(this.viewDate,c)):a.shiftKey?(e=this.moveMonth(this.date,c),d=this.moveMonth(this.viewDate,c)):(e=new Date(this.date),e.setUTCDate(this.date.getUTCDate()+7*c),d=new Date(this.viewDate),d.setUTCDate(this.viewDate.getUTCDate()+7*c));this.dateWithinRange(e)&&
(this.date=e,this.viewDate=d,this.setValue(),this.update(),a.preventDefault(),b=!0);break;case 13:this.hide();a.preventDefault();break;case 9:this.hide()}if(b){this.element.trigger({type:"changeDate",date:this.date});var h;this.isInput?h=this.element:this.component&&(h=this.element.find("input"));h&&h.change()}}},showMode:function(a){a&&(this.viewMode=Math.max(this.minViewMode,Math.min(2,this.viewMode+a)));this.picker.find(">div").hide().filter(".datepicker-"+f.modes[this.viewMode].clsName).css("display",
"block");this.updateNavArrows()}};d.fn.datepicker=function(a){var b=Array.apply(null,arguments);b.shift();return this.each(function(){var c=d(this),e=c.data("datepicker"),f="object"==typeof a&&a;e||c.data("datepicker",e=new p(this,d.extend({},d.fn.datepicker.defaults,f)));"string"==typeof a&&"function"==typeof e[a]&&e[a].apply(e,b)})};d.fn.datepicker.defaults={};d.fn.datepicker.Constructor=p;var n=d.fn.datepicker.dates={en:{days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),
daysShort:"Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),daysMin:"Su Mo Tu We Th Fr Sa Su".split(" "),months:"January February March April May June July August September October November December".split(" "),monthsShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),today:"Today"}},f={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(a){return 0===a%4&&0!==a%100||0===a%400},
getDaysInMonth:function(a,b){return[31,f.isLeapYear(a)?29:28,31,30,31,30,31,31,30,31,30,31][b]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(a){var b=a.replace(this.validParts,"\x00").split("\x00");a=a.match(this.validParts);if(!b||!b.length||!a||0===a.length)throw Error("Invalid date format.");return{separators:b,parts:a}},parseDate:function(a,b,c){if(a instanceof Date)return a;if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(a)){var e=
/([\-+]\d+)([dmwy])/,f=a.match(/([\-+]\d+)([dmwy])/g),h;a=new Date;for(var k=0;k<f.length;k++)switch(b=e.exec(f[k]),h=parseInt(b[1]),b[2]){case "d":a.setUTCDate(a.getUTCDate()+h);break;case "m":a=p.prototype.moveMonth.call(p.prototype,a,h);break;case "w":a.setUTCDate(a.getUTCDate()+7*h);break;case "y":a=p.prototype.moveYear.call(p.prototype,a,h)}return q(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),0,0,0)}f=a&&a.match(this.nonpunctuation)||[];a=new Date;var e={},r="yyyy yy M MM m mm d dd".split(" ");
h={yyyy:function(a,b){return a.setUTCFullYear(b)},yy:function(a,b){return a.setUTCFullYear(2E3+b)},m:function(a,b){for(b-=1;0>b;)b+=12;b%=12;for(a.setUTCMonth(b);a.getUTCMonth()!=b;)a.setUTCDate(a.getUTCDate()-1);return a},d:function(a,b){return a.setUTCDate(b)}};var g;h.M=h.MM=h.mm=h.m;h.dd=h.d;a=q(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0);var l=b.parts.slice();f.length!=l.length&&(l=d(l).filter(function(a,b){return-1!==d.inArray(b,r)}).toArray());if(f.length==l.length){for(var k=0,u=l.length;k<
u;k++){g=parseInt(f[k],10);b=l[k];if(isNaN(g))switch(b){case "MM":g=d(n[c].months).filter(function(){var a=this.slice(0,f[k].length),b=f[k].slice(0,a.length);return a==b});g=d.inArray(g[0],n[c].months)+1;break;case "M":g=d(n[c].monthsShort).filter(function(){var a=this.slice(0,f[k].length),b=f[k].slice(0,a.length);return a==b}),g=d.inArray(g[0],n[c].monthsShort)+1}e[b]=g}for(k=0;k<r.length;k++)if(b=r[k],b in e&&!isNaN(e[b]))h[b](a,e[b])}return a},formatDate:function(a,b,c){c={d:a.getUTCDate(),D:n[c].daysShort[a.getUTCDay()],
DD:n[c].days[a.getUTCDay()],m:a.getUTCMonth()+1,M:n[c].monthsShort[a.getUTCMonth()],MM:n[c].months[a.getUTCMonth()],yy:a.getUTCFullYear().toString().substring(2),yyyy:a.getUTCFullYear()};c.dd=(10>c.d?"0":"")+c.d;c.mm=(10>c.m?"0":"")+c.m;a=[];for(var e=d.extend([],b.separators),f=0,h=b.parts.length;f<h;f++)e.length&&a.push(e.shift()),a.push(c[b.parts[f]]);return a.join("")},headTemplate:'<thead><tr><th class="prev"><i class="icon-arrow-left"/></th><th colspan="5" class="switch"></th><th class="next"><i class="icon-arrow-right"/></th></tr></thead>',
contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr></tfoot>'};f.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+f.headTemplate+"<tbody></tbody>"+f.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+f.headTemplate+f.contTemplate+f.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+f.headTemplate+
f.contTemplate+f.footTemplate+"</table></div></div>";d.fn.datepicker.DPGlobal=f}(window.jQuery);
